import { ValueError } from '../errors.js';
import { BackendProviders } from './constants.js';
import { capitalize } from 'remeda';

var __defProp = Object.defineProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
function findProviderDef(value) {
  return Object.values(BackendProviders).find((p) => p.name === value || p.module === value || p.aliases.includes(value)) ?? null;
}
__name(findProviderDef, "findProviderDef");
function parseModel(name) {
  if (!name) {
    throw new ValueError("Neither 'provider' nor 'provider:model' was specified.");
  }
  const [providerId, ...rest] = name.split(":");
  const modelId = rest.join(":");
  const providerDef = findProviderDef(providerId);
  if (!providerDef) {
    throw new ValueError("Model does not contain provider name!");
  }
  return {
    providerId,
    modelId,
    providerDef
  };
}
__name(parseModel, "parseModel");
async function loadModel(name, type) {
  const { providerDef } = parseModel(name);
  const module = await import(`beeai-framework/adapters/${providerDef.module}/backend/${type}`);
  return module[`${providerDef.name}${capitalize(type)}Model`];
}
__name(loadModel, "loadModel");

export { loadModel, parseModel };
//# sourceMappingURL=utils.js.map
//# sourceMappingURL=utils.js.map